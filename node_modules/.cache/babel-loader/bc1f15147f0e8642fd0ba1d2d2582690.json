{"ast":null,"code":"import _asyncToGenerator from\"/home/carlos/Documentos/GitHub/Appointment-Book-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/carlos/Documentos/GitHub/Appointment-Book-front/node_modules/@babel/runtime/regenerator/index.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import appointmentService from'./appointmentService';var initialState={appointments:[],isError:false,isSuccess:false,isLoading:false,message:''};// Create new appointment\nexport var createAppointment=createAsyncThunk('appointments/create',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(appointmentData,thunkAPI){var token,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=thunkAPI.getState().auth.user.token;_context.next=4;return appointmentService.createAppointment(appointmentData,token);case 4:return _context.abrupt(\"return\",_context.sent);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Get user appointments\nexport var getAppointments=createAsyncThunk('appointments/getAll',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_,thunkAPI){var token,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;token=thunkAPI.getState().auth.user.token;_context2.next=4;return appointmentService.getAppointments(token);case 4:return _context2.abrupt(\"return\",_context2.sent);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// Delete user appointment\nexport var deleteAppointment=createAsyncThunk('appointments/delete',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,thunkAPI){var token,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;token=thunkAPI.getState().auth.user.token;_context3.next=4;return appointmentService.deleteAppointment(id,token);case 4:return _context3.abrupt(\"return\",_context3.sent);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);message=_context3.t0.response&&_context3.t0.response.data&&_context3.t0.response.data.message||_context3.t0.message||_context3.t0.toString();return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var appointmentSlice=createSlice({name:'appointment',initialState:initialState,reducers:{reset:function reset(state){return initialState;}},extraReducers:function extraReducers(builder){builder.addCase(createAppointment.pending,function(state){state.isLoading=true;}).addCase(createAppointment.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.appointments.push(action.payload);}).addCase(createAppointment.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;}).addCase(getAppointments.pending,function(state){state.isLoading=true;}).addCase(getAppointments.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.appointments=action.payload;}).addCase(getAppointments.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;}).addCase(deleteAppointment.pending,function(state){state.isLoading=true;}).addCase(deleteAppointment.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.appointments=state.appointments.filter(function(appointment){return appointment._id!==action.payload.id;});}).addCase(deleteAppointment.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;});}});var reset=appointmentSlice.actions.reset;export{reset};export default appointmentSlice.reducer;","map":{"version":3,"sources":["/home/carlos/Documentos/GitHub/Appointment-Book-front/src/features/appointments/appointmentSlice.js"],"names":["createSlice","createAsyncThunk","appointmentService","initialState","appointments","isError","isSuccess","isLoading","message","createAppointment","appointmentData","thunkAPI","token","getState","auth","user","response","data","toString","rejectWithValue","getAppointments","_","deleteAppointment","id","appointmentSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","filter","appointment","_id","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport appointmentService from './appointmentService'\n\nconst initialState = {\n  appointments: [],\n  isError: false,\n  isSuccess: false,\n  isLoading: false,\n  message: '',\n}\n\n// Create new appointment\nexport const createAppointment = createAsyncThunk(\n  'appointments/create',\n  async (appointmentData, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token\n      return await appointmentService.createAppointment(appointmentData, token)\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n      return thunkAPI.rejectWithValue(message)\n    }\n  }\n)\n\n// Get user appointments\nexport const getAppointments = createAsyncThunk(\n  'appointments/getAll',\n  async (_, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token\n      return await appointmentService.getAppointments(token)\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n      return thunkAPI.rejectWithValue(message)\n    }\n  }\n)\n\n// Delete user appointment\nexport const deleteAppointment = createAsyncThunk(\n  'appointments/delete',\n  async (id, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token\n      return await appointmentService.deleteAppointment(id, token)\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n      return thunkAPI.rejectWithValue(message)\n    }\n  }\n)\n\nexport const appointmentSlice = createSlice({\n  name: 'appointment',\n  initialState,\n  reducers: {\n    reset: (state) => initialState,\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(createAppointment.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(createAppointment.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.appointments.push(action.payload)\n      })\n      .addCase(createAppointment.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n      })\n      .addCase(getAppointments.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(getAppointments.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.appointments = action.payload\n      })\n      .addCase(getAppointments.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n      })\n      .addCase(deleteAppointment.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(deleteAppointment.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.appointments = state.appointments.filter(\n          (appointment) => appointment._id !== action.payload.id\n        )\n      })\n      .addCase(deleteAppointment.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n      })\n  },\n})\n\nexport const { reset } = appointmentSlice.actions\nexport default appointmentSlice.reducer\n"]},"metadata":{},"sourceType":"module"}